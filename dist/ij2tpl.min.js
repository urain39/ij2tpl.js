!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).IJ2TPL=e()}(function(){return function a(i,s,f){function u(r,e){if(!s[r]){if(!i[r]){var t="function"==typeof require&&require;if(!e&&t)return t(r,!0);if(c)return c(r,!0);var n=new Error("Cannot find module '"+r+"'");throw n.code="MODULE_NOT_FOUND",n}var o=s[r]={exports:{}};i[r][0].call(o.exports,function(e){return u(i[r][1][e]||e)},o,o.exports,a,i,s,f)}return s[r].exports}for(var c="function"==typeof require&&require,e=0;e<f.length;e++)u(f[e]);return u}({1:[function(e,r,t){"use strict";t.__esModule=!0;var h={"?":0,"!":1,"/":2,"#":4};function o(e,r,t){for(var n,o,a=[],i=0,s=0,f=e.length,u=r.length,c=t.length;i<f;){if(-1===(s=e.indexOf(r,i))){0<(o=e.slice(i)).length&&a.push([3,o]);break}if(o=e.slice(i,s),s+=u,0<o.length&&a.push([3,o]),-1===(i=e.indexOf(t,s)))throw new SyntaxError("No match prefix '"+r+"'");if(o=e.slice(s,i),i+=c,!(o.length<1))switch(n=o[0]){case"?":case"!":case"/":case"#":o=o.slice(1),a.push([h[n],o]);break;case"-":break;default:a.push([5,o])}}return a}t.tokenize=o;var l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#x60;","=":"&#x3D;","/":"&#x2F;"};var p=(n.prototype.resolve=function(e){var r,t=null,n=this,o=n.cache;if(o.hasOwnProperty(e))t=o[e];else{if(0<e.indexOf(".")){for(var a=void 0,i=e.split("."),a=i[0];n;n=n.parent)if((r=n.data)&&r.hasOwnProperty&&r.hasOwnProperty(a)){t=r[a];for(var s=1,f=i.length;s<f;s++){if(a=i[s],!(t&&t.hasOwnProperty&&t.hasOwnProperty(a))){t=null;break}t=t[a]}break}}else for(;n;n=n.parent)if((r=n.data)&&r.hasOwnProperty&&r.hasOwnProperty(e)){t=r[e];break}this.cache[e]=t=t||""}return t},n);function n(e,r){this.data=e,this.parent=r,this.cache={".":this.data}}t.Context=p;var a=(i.prototype.renderTree=function(e,r){for(var t,n,o="",a=0,i=e;a<i.length;a++){var s=i[a];switch(s[0]){case 0:if(!(t=r.resolve(s[1])))continue;if(t instanceof Array)for(var f=0,u=t;f<u.length;f++){var c=u[f];o+=this.renderTree(s[2],new p(c,r))}else o+=this.renderTree(s[2],new p(t,r));break;case 1:(!(t=r.resolve(s[1]))||t instanceof Array&&t.length<1)&&(o+=this.renderTree(s[2],r));break;case 3:o+=s[1];break;case 4:o+=r.resolve(s[1]);break;case 5:o+=(n=r.resolve(s[1]),String(n).replace(/[&<>"'`=\/]/g,function(e){return l[e]}))}}return o},i.prototype.render=function(e){return this.renderTree(this.treeRoot,new p(e,null))},i);function i(e){this.treeRoot=e}t.Renderer=a,t.parse=function(e,r,t){void 0===r&&(r="{"),void 0===t&&(t="}");var n=function(e){for(var r,t=[],n=[],o=n,a=0,i=e;a<i.length;a++){var s=i[a];switch(s[0]){case 0:case 1:o.push(s),r=s,t.push(r),o=r[2]=[];break;case 2:if(!(r=t.pop())||s[1]!==r[1])throw new SyntaxError("Unexpected token '<type="+s[0]+", value="+s[1]+">'");o=0<t.length?t[t.length-1][2]:n;break;default:o.push(s)}}if(0<t.length)throw r=t.pop(),new SyntaxError("No match section '<type="+r[0]+", value="+r[1]+">'");return n}(o(e,r,t));return new a(n)}},{}]},{},[1])(1)});