(function(e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e()}else if(typeof define==="function"&&define.amd){define([],e)}else{var r;if(typeof window!=="undefined"){r=window}else if(typeof global!=="undefined"){r=global}else if(typeof self!=="undefined"){r=self}else{r=this}r.IJ2TPL=e()}})(function(){var e,r,n;return function(){function c(i,a,f){function s(n,e){if(!a[n]){if(!i[n]){var r="function"==typeof require&&require;if(!e&&r)return r(n,!0);if(u)return u(n,!0);var t=new Error("Cannot find module '"+n+"'");throw t.code="MODULE_NOT_FOUND",t}var o=a[n]={exports:{}};i[n][0].call(o.exports,function(e){var r=i[n][1][e];return s(r||e)},o,o.exports,c,i,a,f)}return a[n].exports}for(var u="function"==typeof require&&require,e=0;e<f.length;e++)s(f[e]);return s}return c}()({1:[function(e,r,n){"use strict";n.__esModule=true;var l={"?":0,"!":1,"/":2,"#":4};function o(e,r,n){var t,o,i=[];for(var a=0,f=0,s=e.length,u=r.length,c=n.length;a<s;){f=e.indexOf(r,a);if(f===-1){o=e.slice(a);if(o.length>0)i.push([3,o]);break}o=e.slice(a,f);f+=u;if(o.length>0)i.push([3,o]);a=e.indexOf(n,f);if(a===-1)throw new SyntaxError("No match prefix '"+r+"'");o=e.slice(f,a);a+=c;if(o.length<1)continue;t=o[0];switch(t){case"?":case"!":case"/":case"#":o=o.slice(1);i.push([l[t],o]);break;case"-":break;default:i.push([5,o])}}return i}n.tokenize=o;var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#x60;","=":"&#x3D;","/":"&#x2F;"};function c(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return t[e]})}var h=function(){function e(e,r){this.data=e;this.parent=r;this.cache={".":this.data}}e.prototype.resolve=function(e){var r,n,t=null,o=this;n=o.cache;if(n.hasOwnProperty(e)){t=n[e]}else{if(e.indexOf(".")>0){var i=void 0,a=e.split(".");i=a[0];for(;o;o=o.parent){r=o.data;if(r&&r.hasOwnProperty&&r.hasOwnProperty(i)){t=r[i];for(var f=1,s=a.length;f<s;f++){i=a[f];if(t&&t.hasOwnProperty&&t.hasOwnProperty(i)){t=t[i]}else{t=null;break}}break}}}else{for(;o;o=o.parent){r=o.data;if(r&&r.hasOwnProperty&&r.hasOwnProperty(e)){t=r[e];break}}}n[e]=t}return t};return e}();n.Context=h;var i=function(){function e(e){this.treeRoot=e}e.prototype.renderTree=function(e,r){var n,t="";for(var o=0,i=e;o<i.length;o++){var a=i[o];switch(a[0]){case 0:n=r.resolve(a[1]);if(!n)continue;if(n instanceof Array)for(var f=0,s=n;f<s.length;f++){var u=s[f];t+=this.renderTree(a[2],new h(u,r))}else t+=this.renderTree(a[2],new h(n,r));break;case 1:n=r.resolve(a[1]);if(!n||n instanceof Array&&n.length<1)t+=this.renderTree(a[2],r);break;case 3:t+=a[1];break;case 4:n=r.resolve(a[1]);t+=n;break;case 5:n=r.resolve(a[1]);if(n||n===0)t+=typeof n==="number"?n:c(n);break}}return t};e.prototype.render=function(e){return this.renderTree(this.treeRoot,new h(e,null))};return e}();n.Renderer=i;function a(e){var r,n=[],t=[],o=t;for(var i=0,a=e;i<a.length;i++){var f=a[i];switch(f[0]){case 0:case 1:o.push(f);r=f;n.push(r);o=r[2]=[];break;case 2:r=n.pop();if(!r||f[1]!==r[1])throw new SyntaxError("Unexpected token '<type="+f[0]+", value="+f[1]+">'");n.length>0?o=n[n.length-1][2]:o=t;break;default:o.push(f)}}if(n.length>0){r=n.pop();throw new SyntaxError("No match section '<type="+r[0]+", value="+r[1]+">'")}return t}function f(e,r,n){if(r===void 0){r="{"}if(n===void 0){n="}"}var t=a(o(e,r,n));return new i(t)}n.parse=f},{}]},{},[1])(1)});